rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
  
    // Default deny all reads and writes
    match /{document=**} {
      allow read, write: if false;
    }

    // Allow public read access for site settings, faculty, and gallery.
    match /settings/global {
      allow get: if true;
    }

    match /teachers/{teacherId} {
        allow get: if true;
    }

    match /teachers/{teacherId} {
        allow list: if true;
    }
    
    // Allow public read access for results
    match /results/{resultId} {
      allow get: if true;
    }
    
    match /results/{resultId} {
      allow list: if true;
    }

    // Keep admissions, students, and other collections private.
    // The admin panel should use server-side actions with admin privileges
    // to access these, bypassing these client-side rules.
    match /admissions/{admissionId} {
      allow read, write: if false;
    }
    
    match /students/{studentId} {
      allow read, write: if false;
    }
  }
}
